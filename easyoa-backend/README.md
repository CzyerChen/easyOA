### 一、需求说明
1. 员工浏览登录休假系统
2. 在线填写休假申请单
3. 员工点击申请
4. 发送邮件/短信到审批员工
5. 审批员工登录系统
6. 审批员工查看代办事项，进行审批
7. 审批员工完成审批操作，发送邮件和消息给员工
8. 同时记录休假结果，统计员工休假天数
9. 员工休假完毕，确认休假

**附：**
1. 销假申请/审批/查询，销假步骤需要管理员执行
2. 年度/季度/月度/周休假情况查询和导出，包含已完成和申请中的记录


### 二、功能点
- easyoa-common 模块提供基础支持
- easyoa-core 模块提供leavemanager的基础数据结构和dao层实现
- easyoa-leavemanager 模块关注与前端交互的接口实现
- easyoa-rulemanager 模块关注某一用户某一时间段是否具有请假申请的资格
- easyoa-filemanager 模块关注文件的上传下载


### 三、技术选型与说明
#### 3.1 权限认证框架
1. Springboot +Shiro +Jwt 做无状态的身份认证，不需要Redis做Session Manager , 需要禁用session 
2. Springboot 提供一个框架支持 ，Shiro和Jwt都不依赖于Spring
3. Jwt是无状态的，所以可以运用在b端和c端
4. Jwt的密文在redis中存储，这个需要自己实现
5. Jwt的过期时间和刷新时间，需要在filter中进行检测，过期时间是基础时间的两倍
6. 首次登录使用用户名密码认证，根据认证结果生成token,并在头字段中返回，并要求后面的请求都携带token字段，不然就没有权限
7. 后面的访问流程都走Jwt filter，做token验证


#### 3.2 ORM框架
1. Springboot与Jpa 结合能够支持一对多，多对多的操作，也能够支持join等查询，能够快速便捷的运用在单表相关的查询上
2. 使用Druid的数据库连接池，能够支持线程复用、管理线程、控制并发


#### 3.3 AOP
1. 登录日志记录、操作日志记录
2. 接口限次


#### 3.4 自定义异常
1. 资源链接异常
2. token过期异常
3. 业务异常
4. 全局异常处理


### 四、项目部署与应用
1. 利用docker进行容器化快速部署

### 附:Releases
- [1]Release1-2019/7/31:包含用户管理、角色管理、菜单管理、流程管理、规则管理、节假日管理、休假申请、我的消息、我的数据、待审核申请、我的处理
- [2]Release2-2019/8/8:包含销假管理、公告管理、邮件管理、休假数据、所有申请、用户数据/汇报关系模板下载、页面友好化的跳转
```text
数据库新增报表相关表
申请单对象新增结束时间字段
新增审批人员2，可以查看所有申请
支持"提示"->"我的消息"，"我的消息"->"待审核申请"，"首页数据"->"我的数据"跳转
修复Excel导出问题
```
- [3]Release2-2022/2/25:包含公司管理、销假管理、首页、用户管理、角色管理、审批流程
```text
1、新增公司管理，增加管理员对公司的增删改查。超级管理员能够进行公司的修改。
2、用户、部门管理增加公司维度信息配置。各公司管理员能够进行独立管理，包括独立用户管理、独立流程管理、独立休假规则管理、独立报表数据等。
3、增加销假功能，申请人能够撤销申请、删除申请，审批人员能够撤销申请，管理员能够对进行中/完成的申请进行撤销
4、首页优化：增加申请列表、处理列表、休假日历、处理进度、快捷跳转等展示
5、用户角色绑定一对一（原多选）
6、用户信息导入模板修改，增加工号、所属中心、部门、性别、婚姻状态的校验，并给出对应提示
7、增加平台缓存刷新功能
8、修复所有申请、销假管理页面默认筛选时间异常
9、修复申请页面上班时间段提示，修改时间段校验
10、优化页面按钮提示，增加按钮功能解释提示
```

### 五、TODO
1. 引入状态机处理工单状态的变化
2. 引入xxl-job定时任务取代spring自带的
3. 引入规则定义引擎，取代目前固定的流程，支持更高的自由度